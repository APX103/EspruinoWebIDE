<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="blockly_compressed.js"></script>
    <script type="text/javascript" src="blocks_compressed.js"></script>
    <script type="text/javascript" src="en.js"></script>
    <script type="text/javascript" src="ru.js"></script>
    <script type="text/javascript" src="javascript_compressed.js"></script>
    <script type="text/javascript" src="blockly_espruino.js"></script>
    <script type="text/javascript" src="blockly_robot.js"></script>
    <script type="text/javascript" src="blockly_amperka_motorshield.js"></script>
    <script type="text/javascript" src="blockly_ble.js"></script>
    <script type="text/javascript" src="blockly_nordic_thingy.js"></script>
    <script type="text/javascript" src="blockly_smartibot.js"></script>
    <script type="text/javascript" src="field_textarea.js"></script>
    <style>
      html, body {
        background-color: #fff;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      .blocklySvg {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>

  <!-- Blockly toolbox -->
  <xml id="toolbox" style="display: none">
    <category name="Logic">
      <block type="controls_if"></block>
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
      <block type="logic_ternary"></block>
    </category>
    <category name="Control">
      <block type="espruino_delay">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="espruino_timeout">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="espruino_interval">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <block type="math_number">
            <title name="NUM">10</title>
          </block>
        </value>
      </block>
      <block type="controls_whileUntil"></block>
      <block type="controls_for">
        <value name="FROM">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <title name="NUM">10</title>
          </block>
        </value>
        <value name="BY">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
      </block>
      <block type="controls_forEach"></block>
      <block type="controls_flow_statements"></block>
    </category>
    <category name="Math">
      <block type="math_number">
        <title name="NUM">0</title>
      </block>
      <block type="math_arithmetic">
        <title name="OP">ADD</title>
      </block>
      <block type="math_single">
        <title name="OP">ROOT</title>
      </block>
      <block type="math_trig">
        <title name="OP">SIN</title>
      </block>
      <block type="math_constant">
        <title name="CONSTANT">PI</title>
      </block>
      <block type="math_number_property">
        <mutation divisor_input="false"></mutation>
        <title name="PROPERTY">EVEN</title>
      </block>
      <block type="math_change">
        <title name="VAR">item</title>
        <value name="DELTA">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
      </block>
      <block type="math_round">
        <title name="OP">ROUND</title>
      </block>
      <block type="math_on_list">
        <title name="OP">SUM</title>
      </block>
      <block type="math_modulo"></block>
      <block type="math_constrain" >
        <value name="LOW">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="HIGH">
          <block type="math_number">
            <title name="NUM">100</title>
          </block>
        </value>
      </block>
      <block type="math_random_int">
        <value name="FROM">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <title name="NUM">100</title>
          </block>
        </value>
      </block>
      <block type="math_random_float"></block>
    </category>
    <category name="Text">
      <block type="text"  >
        <title name="TEXT"></title>
      </block>
      <block type="text_join" inline="false"  >
        <mutation items="2"></mutation>
      </block>
      <block type="text_append" inline="false"  >
        <title name="VAR">item</title>
        <value name="TEXT">
          <block type="text">
            <title name="TEXT"></title>
          </block>
        </value>
      </block>
      <block type="text_length" inline="false"  ></block>
      <block type="text_isEmpty" inline="true"  ></block>
      <block type="text_indexOf" inline="true"  >
        <title name="END">FIRST</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_charAt" inline="true"  >
        <mutation at="true"></mutation>
        <title name="WHERE">FROM_START</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_getSubstring" inline="true"  >
        <mutation at1="true" at2="true"></mutation>
        <title name="WHERE1">FROM_START</title>
        <title name="WHERE2">FROM_START</title>
        <value name="STRING">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_changeCase" inline="false"  >
        <title name="CASE">UPPERCASE</title>
      </block>
      <block type="text_trim" inline="false"  >
        <title name="MODE">BOTH</title>
      </block>
      <block type="text_print" inline="false"  ></block>
    </category>
    <category name="Lists">
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
          <block type="lists_create_empty"  ></block>
      </value></block>
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
        <block type="lists_create_with" inline="false"  >
          <mutation items="3"></mutation>
        </block>
      </value></block>
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
        <block type="lists_repeat" inline="true"  >
          <value name="NUM">
            <block type="math_number">
              <title name="NUM">5</title>
            </block>
          </value>
        </block>
      </value></block>
      <block type="lists_length" inline="false"  ></block>
      <block type="lists_isEmpty" inline="true"  ></block>
      <block type="lists_indexOf" inline="true"  >
        <title name="END">FIRST</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_getIndex" inline="true"  >
        <mutation statement="false" at="true"></mutation>
        <title name="MODE">GET</title>
        <title name="WHERE">FROM_START</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_setIndex" inline="true"  >
        <mutation at="true"></mutation>
        <title name="MODE">SET</title>
        <title name="WHERE">FROM_START</title>
        <value name="LIST">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_getSublist" inline="true"  >
        <mutation at1="true" at2="true"></mutation>
        <title name="WHERE1">FROM_START</title>
        <title name="WHERE2">FROM_START</title>
        <value name="LIST">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
    </category>
    <category name="Variables">
      <block type="variables_set" inline="false"  >
        <title name="VAR">item</title>
      </block>
      <block type="variables_get"  >
        <title name="VAR">item</title>
      </block>
    </category>
    <!--<category name="Procedures">
      <block type="procedures_defnoreturn"  >
        <mutation></mutation>
        <title name="NAME">do something</title>
      </block>
      <block type="procedures_defreturn" inline="false"  >
        <mutation></mutation>
        <title name="NAME">do something2</title>
      </block>
      <block type="procedures_ifreturn" inline="true"  >
        <mutation value="1"></mutation>
      </block>
      TODO - need to auto-add calls here??
    </category> -->
    <category name="Espruino">
      <block type="espruino_getTime"></block>
      <block type="espruino_pin"></block>
      <block type="espruino_watch">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">BTN1</title></block></value>
      </block>
      <block type="espruino_digitalWrite">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">LED1</title></block></value>
      </block>
      <block type="espruino_digitalPulse">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">LED1</title></block></value>
        <value name="VAL"><block type="logic_boolean"><title name="BOOL">TRUE</title></block></value>
        <value name="TIME"><block type="math_number"><title name="NUM">100</title></block></value>
      </block>
      <block type="espruino_digitalRead">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">BTN1</title></block></value>
      </block>
      <block type="espruino_analogWrite">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">A1</title></block></value>
      </block>
      <block type="espruino_analogRead">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">A0</title></block></value>
      </block>
      <block type="espruino_pinMode">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">D0</title></block></value>
      </block>
      <block type="espruino_code">
      </block>
      <block type="espruino_jsexpression">
      </block>
    </category>
    <category name="Hardware">
      <block type="hw_servoMove">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">B13</title></block></value>
        <value name="VAL"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="hw_servoStop">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">B13</title></block></value>
      </block>
      <block type="hw_ultrasonic">
        <value name="TRIG"><block type="espruino_pin"><title name="PIN">B4</title></block></value>
        <value name="ECHO"><block type="espruino_pin"><title name="PIN">B3</title></block></value>
      </block>
    </category>
    <category name="Robot" enable_if="robot">
      <block type="robot_motor"></block>
      <block type="robot_led"></block>
      <block type="robot_ldr"></block>
    </category>
    <!-- Amperka's MotorShield -->
    <category name="Amperka Motor Shield" enable_if="motorshield">
      <block type="amperka_motorshield_motor"></block>
      <block type="amperka_motorshield_motor_dir"></block>
    </category>
    <!-- Nordic Thingy:52 -->
    <category name="Nordic Thingy:52" enable_if="nordic_thingy">
      <block type="thingy_sound_play"><value name="SAMPLERATE"><block type="math_number"><title name="NUM">4000</title></block></value></block>
      <block type="thingy_sound_record"><value name="LEN"><block type="math_number"><title name="NUM">1000</title></block></value></block>
      <block type="thingy_sensor_once"></block>
      <block type="thingy_sensor_many"></block>
      <block type="thingy_result"></block>
    </category>

   <category name="Smartibot Motors" enable_if="smartibot">
      <block type="smartibot_M1Fwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
       <block type="smartibot_M1Bwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
          <block type="smartibot_M2Fwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
       <block type="smartibot_M2Bwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
      <block type="smartibot_M3Fwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
       <block type="smartibot_M3Bwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
          <block type="smartibot_M4Fwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
       <block type="smartibot_M4Bwd">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
    </category>

    <category name="Smartiboard" enable_if="smartibot">
      <block type="smartibot_LED">
        <value name="VAL"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="VAL2"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="VAL3"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="VAL4"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="VAL5"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="VAL6"><block type="math_number"><title name="NUM">50</title></block></value>
      </block>
      <block type="smartibot_LEDorange">
        <value name="VAL"><block type="math_number"><title name="NUM">0.9</title></block></value>
      </block>
       <block type="smartibot_LEDpink">
        <value name="VAL"><block type="math_number"><title name="NUM">0.9</title></block></value>
      </block>
        <block type="smartibot_LEDblue">
        <value name="VAL"><block type="math_number"><title name="NUM">0.9</title></block></value>
      </block>
      <block type="espruino_watch">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">BTN1</title></block></value>
      </block>
    </category>

    <category name="Bluetooth" enable_if="bluetooth">
      <block type="ble_connected"></block>
      <block type="ble_disconnected"></block>

      <block type="ble_dev_name"></block>
      <block type="ble_dev_prefix"></block>
      <block type="ble_dev_address"></block>

      <block type="ble_characteristic"></block>
      <block type="ble_characteristic_dropdown"></block>

      <block type="ble_setchar"></block>
      <block type="ble_getchar"></block>
      <block type="ble_write"></block>
      <block type="ble_onwritten"></block>
      <block type="ble_value"></block>
    </category>
    <category name="Functions" custom="PROCEDURE"></category>
  </xml>

    <!-- Blockly initial code -->
<xml id="blocklyInitial" style="display: none">
  <block type="espruino_watch" inline="true"  ><title name="EDGE">rising</title><value name="PIN"><block type="espruino_pin"><title name="PIN">BTN1</title></block></value><statement name="DO"><block type="espruino_digitalWrite" inline="true"><value name="PIN"><block type="espruino_pin"><title name="PIN">LED1</title></block></value><value name="VAL"><block type="logic_boolean"><title name="BOOL">TRUE</title></block></value><next><block type="espruino_timeout" inline="true"><value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value><statement name="DO"><block type="espruino_digitalWrite" inline="true"><value name="PIN"><block type="espruino_pin"><title name="PIN">LED1</title></block></value><value name="VAL"><block type="logic_boolean"><title name="BOOL">FALSE</title></block></value></block></statement></block></next></block></statement></block>
</xml>
<xml id="blocklyInitial_smartibot" style="display: none">
<block type="espruino_interval" id="@nX^A01+C{ieu:UEyhWj" x="27" y="-9"><value name="SECONDS"><block type="math_number" id="iHMiWHiuTzz=+tMH@Wvi"><field name="NUM">5</field></block></value><statement name="DO"><block type="smartibot_M1Fwd" id="ug#@+wF{8$2ADJ4Hbn`9"><value name="VAL"><block type="math_number" id="ak8{o0.tRD+qnfKn/9h/"><field name="NUM">0.5</field></block></value><next><block type="smartibot_M2Bwd" id="*s4-j6eHqw%}OUuE$J]*"><value name="VAL"><block type="math_number" id="}2J^{TO/YZg/n|fr$E[,"><field name="NUM">0.5</field></block></value><next><block type="smartibot_LEDpink" id="0p1k?L./it!=jb1#xi=$"><value name="VAL"><block type="math_number" id="zZsdDq)0,u0tG^=HDm$Z"><field name="NUM">0.9</field></block></value><next><block type="espruino_timeout" id="CGDM6aplVq~Dhcb(RuA+"><value name="SECONDS"><block type="math_number" id="@CVla^6.w%#c1mJ3Q@om"><field name="NUM">1</field></block></value><statement name="DO"><block type="smartibot_M1Bwd" id="_p~-wI/d`MzW.c#|FW:$"><value name="VAL"><block type="math_number" id="3r|HjT|j1x1rT!2FSW,N"><field name="NUM">0.5</field></block></value><next><block type="smartibot_M2Fwd" id="+V}t%5g)Y[Ed3+;W0~#4"><value name="VAL"><block type="math_number" id="KL.e?Y:G_g?;1WMdQa%p"><field name="NUM">0.5</field></block></value><next><block type="smartibot_LEDblue" id="w(0W*Y9Z$MRqjLSgWGPT"><value name="VAL"><block type="math_number" id="ZTi]KrZ)p7Z:?Pp]`QHy"><field name="NUM">0.9</field></block></value></block></next></block></next></block></statement><next><block type="espruino_timeout" id="fulIYVvp{r36A*#0]0@%"><value name="SECONDS"><block type="math_number" id="h/Vs]Y!ZbcEI+@kRtB[^"><field name="NUM">2</field></block></value><statement name="DO"><block type="smartibot_M1Fwd" id="?k@VKX=ycyiB=#xC-yg/"><value name="VAL"><block type="math_number" id="}3opMRo3#=#f#pVesGtI"><field name="NUM">0.5</field></block></value><next><block type="smartibot_M2Fwd" id="Vb[emar=x*s}W|@^mPJ_"><value name="VAL"><block type="math_number" id="3uy0BxO6%ZG*%gyNln|T"><field name="NUM">0.5</field></block></value><next><block type="smartibot_LEDpink" id="0iN1ac!;C8zy?E0Kft7y"><value name="VAL"><block type="math_number" id="@Bo)r`wXeQ0sbFs,z*hH"><field name="NUM">0.9</field></block></value></block></next></block></next></block></statement><next><block type="espruino_timeout" id="bYNg42w=EVbk*8cG8E@N"><value name="SECONDS"><block type="math_number" id="1vSLYN{XJoP*+LIiefxF"><field name="NUM">3</field></block></value><statement name="DO"><block type="smartibot_M1Bwd" id="H+(qq52x:x:3:$7Y9mTF"><value name="VAL"><block type="math_number" id=";u#nH~Suvfk,yRJKf:Cs"><field name="NUM">0.5</field></block></value><next><block type="smartibot_M2Bwd" id="Z~|66_s5]Z]e$}9gZr#@"><value name="VAL"><block type="math_number" id="tIar:6zP@##?Pw^l]tVK"><field name="NUM">0.5</field></block></value><next><block type="smartibot_LEDblue" id="_vSX5;8R[7x-;nTyCQ8]"><value name="VAL"><block type="math_number" id=";Oz.+kiU4fjs{$B;c9FY"><field name="NUM">0.9</field></block></value></block></next></block></next></block></statement><next><block type="espruino_timeout" id=",Wfuzk}VJXxd}!?T99ox"><value name="SECONDS"><block type="math_number" id="mWW1/fNW+]?`wCV-IGTg"><field name="NUM">4</field></block></value><statement name="DO"><block type="smartibot_M1Fwd" id="H@o5s#*`s*|qAWUO7l+)"><value name="VAL"><block type="math_number" id="/38Pg]/tBQe@p|s7_1=2"><field name="NUM">0</field></block></value><next><block type="smartibot_M2Bwd" id="BlVOd[YG-X|(/:-`(wo."><value name="VAL"><block type="math_number" id="SE,K$*:@V_qv(bOQGtGJ"><field name="NUM">0</field></block></value><next><block type="smartibot_LEDorange" id="h3f`fJx(f8i(l|0BVU|_"><value name="VAL"><block type="math_number" id="I7!:[Rt5ET99:!tn^v#E"><field name="NUM">0.9</field></block></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="smartibot_LEDpink" id="oklDHG2#m}-!R6wN#}Mv" x="101" y="1001"><value name="VAL"><block type="math_number" id="^:75I$C]N,1[v{aF.775"><field name="NUM">0.9</field></block></value></block>
</xml>

  </body>
</html>
